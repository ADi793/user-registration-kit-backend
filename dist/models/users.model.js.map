{"version":3,"sources":["../../src/models/users.model.ts"],"sourcesContent":["import { model, Schema, Document } from 'mongoose';\nimport { User } from '@interfaces/users.interface';\n\nconst userSchema = new Schema<User>({\n  firstName: {\n      type: String,\n      minLength: 2,\n      maxLength: 255,\n      trim: true,\n      required: true,\n  },\n  lastName: {\n    type: String,\n    minLength: 2,\n    maxLength: 255,\n    trim: true,\n    required: true,\n  },\n  email: {\n    type: String,\n    minLength: 5,\n    maxLength: 255,\n    trim: true,\n    required: true,\n  },\n  country: {\n    type: String,\n    minLength: 2,\n    maxLength: 255,\n    trim: true,\n    required: true,\n  },\n  state: {\n    type: String,\n    minLength: 2,\n    maxLength: 255,\n    trim: true,\n    required: true,\n  },\n  city: {\n    type: String,\n    minLength: 2,\n    maxLength: 255,\n    trim: true,\n    required: true,\n  },\n  gender: {\n    type: String,\n    enum: ['male', 'female', 'other'],\n    required: true,\n  },\n  dateOfBirth: {\n    type: Date,\n    required: true,\n    validate: [validateDateOfBirth, 'Age must be greater than 14 years'],\n  },\n  age: {\n    type: Number\n  }\n});\n\nuserSchema.pre('save', function (next) {\n  if (this.dateOfBirth) {\n    this.age = new Date().getFullYear() - this.dateOfBirth.getFullYear();\n  }\n  next();\n});\n\nconst userModel = model<User & Document>('User', userSchema);\n\nfunction validateDateOfBirth(value) {\n  const minAge = 14;\n  const currentDate = new Date();\n  const minDate = new Date(currentDate.getFullYear() - minAge, currentDate.getMonth(), currentDate.getDate());\n  return value < minDate;\n}\n\nexport default userModel;\n"],"names":["userSchema","Schema","firstName","type","String","minLength","maxLength","trim","required","lastName","email","country","state","city","gender","enum","dateOfBirth","Date","validate","validateDateOfBirth","age","Number","pre","next","getFullYear","userModel","model","value","minAge","currentDate","minDate","getMonth","getDate"],"mappings":";;;;+BA6EA;;;eAAA;;;0BA7EwC;AAGxC,MAAMA,aAAa,IAAIC,gBAAM,CAAO;IAClCC,WAAW;QACPC,MAAMC;QACNC,WAAW;QACXC,WAAW;QACXC,MAAM;QACNC,UAAU;IACd;IACAC,UAAU;QACRN,MAAMC;QACNC,WAAW;QACXC,WAAW;QACXC,MAAM;QACNC,UAAU;IACZ;IACAE,OAAO;QACLP,MAAMC;QACNC,WAAW;QACXC,WAAW;QACXC,MAAM;QACNC,UAAU;IACZ;IACAG,SAAS;QACPR,MAAMC;QACNC,WAAW;QACXC,WAAW;QACXC,MAAM;QACNC,UAAU;IACZ;IACAI,OAAO;QACLT,MAAMC;QACNC,WAAW;QACXC,WAAW;QACXC,MAAM;QACNC,UAAU;IACZ;IACAK,MAAM;QACJV,MAAMC;QACNC,WAAW;QACXC,WAAW;QACXC,MAAM;QACNC,UAAU;IACZ;IACAM,QAAQ;QACNX,MAAMC;QACNW,MAAM;YAAC;YAAQ;YAAU;SAAQ;QACjCP,UAAU;IACZ;IACAQ,aAAa;QACXb,MAAMc;QACNT,UAAU;QACVU,UAAU;YAACC;YAAqB;SAAoC;IACtE;IACAC,KAAK;QACHjB,MAAMkB;IACR;AACF;AAEArB,WAAWsB,GAAG,CAAC,QAAQ,SAAUC,IAAI;IACnC,IAAI,IAAI,CAACP,WAAW,EAAE;QACpB,IAAI,CAACI,GAAG,GAAG,IAAIH,OAAOO,WAAW,KAAK,IAAI,CAACR,WAAW,CAACQ,WAAW;IACpE;IACAD;AACF;AAEA,MAAME,YAAYC,IAAAA,eAAK,EAAkB,QAAQ1B;AAEjD,SAASmB,oBAAoBQ,KAAK;IAChC,MAAMC,SAAS;IACf,MAAMC,cAAc,IAAIZ;IACxB,MAAMa,UAAU,IAAIb,KAAKY,YAAYL,WAAW,KAAKI,QAAQC,YAAYE,QAAQ,IAAIF,YAAYG,OAAO;IACxG,OAAOL,QAAQG;AACjB;MAEA,WAAeL"}